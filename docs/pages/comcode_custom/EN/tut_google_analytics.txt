[title sub="Written by Rajesh Kumar (ocProducts)"]Composr Tutorial: Analytics and A/B testing -- using Google Analytics[/title]

The objective of this tutorial is to provide brief information about [i]Google Analytics[/i] and guidance on configuring [i]Google Analytics[/i] through Composr. We provide basic setup instructions, as well as some scenarios and guidance touching on advanced usage. We only really scratch the surface, but our aim is to provide you introductory information as directly applied to Composr -- a foundation for applying all standard Google Analytics techniques described in third-party guides.

Some alternatives to Google Analytics are also discussed at the end of the tutorial.

[contents]decimal,lower-alpha[/contents]

[title="2"]Introduction[/title]

[i]Google Analytics[/i] is a free web based tool offered by Google that generates detailed statistics about website visitors. The tool will provide information on how the visitors found the website through tracking all referring sources such as search engines, pay-per-click, redirects, banner advertisements, email links, and any other channels you have. The tool will also gather and provide details of visitor's behaviour like which pages they have visited, the time spent on each page, and where the visitor exits the site.

Further, [i]Google Analytics[/i] is a very capable "enterprise-class" web analytics solution. It provides rich insights into your website traffic and marketing effectiveness. Powerful, flexible and easy-to-use features let you see and analyse your traffic data. With [i]Google Analytics[/i], you're more prepared to write better-targeted ads, strengthen your marketing initiatives and create higher converting websites.

[i]Google Analytics[/i] allows you to:
 - Monitor advertising [acronym="Return On Investment"]ROI[/acronym]
 - Monitor cross channel and multimedia tracking
 - Create customised reporting
 - Monitor sharing and communicating
 - Visualise your data
 - Monitor a number of metrics such as visitor location, and upstream and downstream traffic

You can sign up for [url="Google Analytics here"]http://www.google.com/analytics[/url]. If you already have a Google account you can sign in, otherwise you can create a new account. In order to really explore the product it is advisable to sign up with your active website details. Upon signup a [i]Google Analytics[/i] tracking code will be generated for your website.

[title="2"]Why analytics?[/title]

Statistical measurement is an important technique for evaluating the activities of a website. It will help you understand the effectiveness and performance of your website investment. The information gathered is both interesting and useful to understand which pages are popular among visitors and which pages may require redesign or content improvements. [i]Google Analytics[/i] is a great tool for improving the effectiveness of any website.

The following are common items gathered by [i]Google Analytics[/i]:
 - Where the visitors are from
 - How the visitors found your website
 - Keywords used to find your website
 - Web browsers used by visitors

In addition to the above list, for larger websites built around a [acronym="Content Management System"]CMS[/acronym] the following gathered items are very important:
 - User's reaction on various dfferent pages
 - Guests getting converted to members (i.e. joins)
 - Other measured goals such as newsletter signups

[title="2"]Google Analytics implementation[/title]

[title="3"]Events, goals and content experiments[/title]

There are three key terms in [i]Google Analytics[/i] which you need to be familiar with in order to setup analytical report conditions. They are [i]Events[/i], [i]Goals[/i] and [i]Content experiments[/i].

[title="4"]Events[/title]

Google Analytics [i]Events[/i] tracking is a method available in scripts provided by Google, used to track [i]events[/i] of user interactions with pages in a website. Actions such as ad clicks, video plays, and downloads, can be tracked by calling the Google script code from the appropriate part of a template/Comcode page. The inputs gathered by [i]events[/i] will be used by [i]Google Analytics[/i] reports.

[title="4"]Goals[/title]

Google Analytics [i]Goals[/i] are pre-defined or user-defined conditions to measure data based on the actions visitors take or perform. [i]Goals[/i] are defined using [i]Google Analytics[/i] to gather information such as how many visitors spend a minimum amount of time on a website, visit more than a minimum number of pages, sign up to a newsletter, download a file, make an eCommerce transaction, etc. [i]Goals[/i] once created cannot be deleted but you can switch off any particular [i]goal[/i] that is not required.

[title="4"]Content experiments[/title]

Google Analytics [i]Content experiments[/i] (or just [i]experiments[/i]) allow you to setup [concept]Multivariate testing[/concept]. Unlike generic A/B testing, in [i]Content experiments[/i] Google allows the user to test up to 10 variation pages from an original page (i.e. true multivariate testing). For the purpose of this tutorial we will only consider A/B testing (i.e. 1 original version & 1 variation), as this is quicker to setup and easier to interpret.

[title="3"]Example scenario[/title]

The first step would be to decide the required [i]goals[/i] for your website. You need to decide what [i]goals[/i] are most appropriate to your website content/functionality.

For a clear understanding, let us consider an example of a political website, including [i]goals[/i]. Among many interesting [i]goals[/i] for this website would be tracking the data on volunteer registration and donations made by visitors. Let us consider those two conditions.

[list="1"]
[*] [b]Tracking volunteer registration[/b]
To define [i]goals[/i], it is essential to first setup the relevant [i]events[/i] to track. The following will be our [i]events[/i]:
[list="a"]
[*] Landing to a page and reading the content
(This can be considered as a hypothesis test case during A/B testing. Since some users may get motivated through different factors to join, such by reading content or viewing visuals)[/*]

[*] Clicking on a link to join[/*]

[*] Going to view the "Thank you" page[/*]
[/list][/*]

[*] [b]Tracking donations[/b]
Events:
[list="a"]
[*] Landing to donation page
(This can be considered as a hypothesis test case during A/B testing. Since some users may get motivated through different factors to join, such by reading content or viewing visuals)[/*]

[*] Clicking on a link or button to make a donation[/*]

[*] Going to view the "Thank you" page[/*]
[/list][/*]
[/list]

Now let's proceed to set this up in [i]Google Analytics[/i]. Follows is a walkthrough on setting up [i]Content experiments[/i], [i]Goals[/i] and [i]Events[/i].

[title="3"]Creating content experiments[/title]

[i]Content experiments[/i] will be useful to assess visitor behaviour when a page with 1 variation is shown. The response trends (effectiveness) can be evaluated through the analysis.

[list="1"]
[*] Log into [url="Google Analytics"]http://www.google.com/analytics[/url][/*]

[*] Click "Reporting" from menu options listed on top right side[/*]

[*] This will open a menu list panel on the left side of the screen[/*]

[*] Scroll down to see "Behavior" as first level menu entry (which usually appears after "Acquisition")[/*]

[*] Click "Behavior" to expand sub-menus, where you can find "Experiments"

[img]data_custom/images/docs/tut_google_analytics/1.jpg[/img][/*]

[*] Click "Experiments" to get a refreshed page in the main panel[/*]

[*] Click on "Create experiment".[/*]

[*] In the new refreshed page provide your inputs for the [concept]Split testing[/concept] scenario.[/*]

[*] Fill up the options and click on "Next Step". Smart tips are there if you need help to understand particular fields.

[img]data_custom/images/docs/tut_google_analytics/2.jpg[/img][/*]

[*] In the next page you can configure your [i]experiments[/i] by providing the URL of the original page in first field and its name in the next field. To observe your variation, provide the URL of the variation page along with its name in corresponding fields. We will differentiate between the versions using a 'version' URL parameter, as shown in the screenshot. Google will use the URLs of the original and variation page to perform Google split analysis which will be explained in a later section (see the "Google split analysis" section).

[img]data_custom/images/docs/tut_google_analytics/3.jpg[/img][/*]

[*] Once you confirm by clicking "Next Step", the tool will prepare [i]experiments[/i] code and provides you the option either to "Manually insert the code" or "Send code to webmaster". We will get the [i]experiments[/i] code, and put this code in for the [i]original[/i] version of the page where we're doing the split testing -- this will be covered under "Configuring Google Analytics split testing within Composr". For now save it in a temporary file somewhere.[/*]

[img]data_custom/images/docs/tut_google_analytics/4.jpg[/img][/*]
[/list]

[title="3"]Creating goals[/title]

Let us create our two [i]goals[/i]. Here's how to create each [i]goal[/i]:
[list="1"]
[*] Log in to [url="Google Analytics"]http://www.google.com/analytics[/url][/*]

[*] Click "Admin" from the menu options (on the top right)[/*]

[*] A three column menu will be shown on the page[/*]

[*] Under the menu you can find "Goals", click that:

[img]data_custom/images/docs/tut_google_analytics/5.jpg[/img][/*]

[*] Click on the "NEW GOAL" button

[img]data_custom/images/docs/tut_google_analytics/6.jpg[/img][/*]

[*] Under the "Goal description" section you will be prompted to provide a name for the [i]goal[/i] and [i]goal type[/i][/*]

[*] Click "Next step", which leads to "Goal details"

[img]data_custom/images/docs/tut_google_analytics/7.jpg[/img][/*]

[*] At the "Goal details" section you can provide the URL to where the [i]goal[/i] is considered reached. In our case we will make it a page, [tt]thankyou[/tt][/*]

[*] The "Value" field is optional. Users generally assign "1" for statistical analysis purpose once the report is generated

[img]data_custom/images/docs/tut_google_analytics/8.jpg[/img][/*]
[/list]

[title="3"]Creating events[/title]

TODO

[title="2"]Configuring the Google Analytics Tracking ID in Composr[/title]

To include the [i]Google Analytics[/i] tracking ID you just need to set a config option within Composr.

[list="1"]
[*] Go to Admin Zone > Setup > Configuration > Site options[/*]

[*] Click on the "General" link shown under the Contents section[/*]

[*] Scroll to find "Google Analytics Web Property ID"[/*]

[*] Make sure "Store full Google Analytics cookies" is ticked (checked), to enable cookies (without this tracking may not work correctly)[/*]

[*] Click "Save"[/*]
[/list]

[title="2"]Configuring Google Analytics split testing within Composr[/title]

To configure through Composr, take the auto generated [i]experiments[/i] script code from earlier.

It is required to paste this script immediately after opening [tt]<head>[/tt] tag. We have to edit the head template in Composr. Developers familiar with Composr can directly edit the template file directly and non-developers users can edit the HTML and do the edit via the Admin Zone.

In either case we need to surround it with some extra code:
[code="Tempcode"]
{+START,IF,{$AND,{$MATCH_KEY_MATCH,:start},{$EQ,{$_GET,version,1},1}}
... (original code goes here) ...
{+END}
[/code]

This extra code contextualises it to just the page we want it on, as we will be putting it into a shared template.

[title="3"]For developers[/title]

[list="1"]
[*] Go to the [tt]themes/default[/tt] folder and copy [tt]HTML_HEAD.tpl[/tt] into [tt]templates_custom[/tt] (if it is not already there)[/*]

[*] Edit [tt]HTML_HEAD.tpl[/tt], pasting the contextualised code after the opening [tt]<head>[/tt] tag[/*]
[/list]

[title="3"]For non-developers[/title]

[list="1"]
[*] Go to Admin Zone > Style > Themes[/*]

[*] Click on the "Edit templates" option available for the used theme[/*]

[*] Select [tt]HTML_HEAD.tpl[/tt] from existing template list[/*]

[*] Click on the "Choose" button after selecting the template file[/*]

[*] The template file will be opened in an editor[/*]

[*] Paste the contextualised code immediately after the opening [tt]<head>[/tt] tag[/*]

[*] Click "Save"[/*]
[/list]

[title="2"]Generating our variant within Composr[/title]

We still need to direct users to either the original or the variant somehow (our "versions").

Recall we used [tt]http://ocportal.com/start.htm?version=1[/tt] as original URL and [tt]http://ocportal.com/start.htm?version=2[/tt] as the variation URL.

In Composr, these two versions can be configured in a single Comcode page, [tt]start[/tt]. You can use Tempcode to create the two scenarios in the file.

Here is an example of a page:
[code="Comcode"]
[semihtml]
{+START,IF,{$EQ,{$_GET,version},1}}
	[staff_note]Shown for http://ocportal.com/start.htm?version=1[/staff_note]

	<p>We'd like you to make a donation:</p>
	<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
		<input type="hidden" name="business" value="payment@ocportal.com" />
		<input type="hidden" name="cmd" value="_donations" />
		<input type="hidden" name="item_name" value="ocPortal friend" />
		<input type="hidden" name="item_number" value="Website donation" />
		<input type="hidden" name="currency_code" value="USD" />
		<input type="hidden" name="return" value="http://ocportal.com/thankyou.htm" />

		<input type="image" name="submit" border="0" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" alt="PayPal - The safer, easier way to pay online" />
		<img alt="" border="0" width="1" height="1" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" />
	</form>
{+END}

{+START,IF,{$EQ,{$_GET,version},2}}
	[staff_note]Shown for http://ocportal.com/start.htm?version=2[/staff_note]

	<p>Donations help pay for our developers to keep adding new features to ocPortal. Maybe you could help us out with a donation?</p>

	<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
		<input type="hidden" name="business" value="payment@ocportal.com" />
		<input type="hidden" name="cmd" value="_donations" />
		<input type="hidden" name="item_name" value="ocPortal friend" />
		<input type="hidden" name="item_number" value="Website donation" />
		<input type="hidden" name="currency_code" value="USD" />
		<input type="hidden" name="return" value="http://ocportal.com/thankyou.htm" />

		<input type="image" name="submit" border="0" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" alt="PayPal - The safer, easier way to pay online" />
		<img alt="" border="0" width="1" height="1" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" />
	</form>
{+END}
[/semihtml]
[/code]

These scenarios present PayPal donation buttons, with slightly different text. Perhaps the second will perform better, but only A/B testing will show us for sure.

[title="2"]Generating links to our variants[/title]

Composr picks the scenario automatically based on the URL shown to the user (the 'version' parameter we decided to use earlier).

We still need to hook it up so that users are randomly directed to different versions.

In our example we did this based on the front page, which is not a good example because users will go there directly. There are ways we could solve this, but that's more advanced than we're covering in this tutorial. Let's simply pretend though that all users are getting there via a menu link.

To configure in Composr:
[list="1"]
[*] Go to Admin Zone > Structure > Menu management[/*]

[*] Pick the desired existing menu name to add the link[/*]

[*] Click on the gear symbol shown at the end of "Caption" field[/*]

[*] Type [tt]:start:version={$SET_RAND,1,2}[/tt] in the "Link" field[/*]

[*] Click "Save"[/*]
[/list]

This menu link generates links randomly, with our two different possible version parameter values.

Now users will get to see two different layout for the same page and responses can be tracked within the [i]Google Analytics[/i] administration. It's easy to see which performs best!

[title="2"]Suggestions for A/B tests[/title]

A/B testing can be time-intensive, and is both a science and an art. Here is a good resource suggesting some [url="possible approaches"]http://www.quicksprout.com/2013/01/14/11-obvious-ab-tests-you-should-try/[/url] to get you going.

[title="2"]Alternatives[/title]

With Composr we generally take a non-partisan approach to recommending third-party technologies. It is usually best we leave choices to the user when we haven't got our own direct solution, especially given that:
a) The landscape of web tools is so diverse,
b) ... and changing so fast.
c) Third-parties may have onerous policies you can't deal with.

However, in a few very special cases we do think its best to pick one widespread tool and pre-integrate it, which we have done with [i]Google Analytics[/i].

In the interest of providing other options, here are some good alternative resources for you to consider...

A/B testing tools:
 - [url="Visual Website Optimizer"]https://vwo.com/[/url]
 - [url="Optimizely"]https://www.optimizely.com/[/url]
 - [url="http://blog.crazyegg.com/2014/06/25/best-testing-software/"]Comparison article[/url]

Hosted analytics tool:
 - http://piwik.org/

[concepts
 1_key="Multivariate testing"		1_value="An analytical technique to see which of multiple variations performs best."
 2_key="Split testing"				2_value="The same as Multivariate testing."
 3_key="A/B testing"					3_value="Multivariate testing with exactly two versions (original version and 1 variation)."
 4_key="Analytics Event"			4_value="An in-page user action that is explicitly triggered via tracking code."
 5_key="Analytics Goal"				5_value="A goal is a defined condition against an event."
 6_key="Analytics Experiment"		6_value="A configured case of A/B testing."
]Concepts[/concepts]

[title="2"]See also[/title]

 - [page="_SEARCH:tut_tempcode"]Tempcode programming[/page]
 - http://www.simplybusiness.co.uk/microsites/google-analytics-guide/
 - https://moz.com/blog/absolute-beginners-guide-to-google-analytics
 - https://econsultancy.com/blog/66230-a-beginner-s-dictionary-of-google-analytics/
 - [page="_SEARCH:tut_statistics"]Activity statistics for your site (analytics)[/page]

{$SET,tutorial_tags,Analytics,Administration,expert,pinned}{$SET,tutorial_add_date,Jan 2016}{$SET,tutorial_summary,Applying advanced Google Analytics techniques to Composr.}[block]main_tutorial_rating[/block]
